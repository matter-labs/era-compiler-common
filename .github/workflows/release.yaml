name: Release-plz

permissions:
  pull-requests: write
  contents: write

on:
  push:
    branches:
      - main

jobs:

  release:
    uses: matter-labs/era-compiler-ci/.github/workflows/release-plz.yaml@v1
    secrets: inherit
    with:
      github_token: ${{ secrets.RELEASE_TOKEN }}
      cargo_registry_token: ${{ secrets.CRATES_IO_TOKEN }}
      run_tests: true
